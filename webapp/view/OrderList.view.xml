<mvc:View
    controllerName="shopfloor.controller.OrderList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    
    <Page
        id="orderListPage"
        title="{i18n>orderListPageTitle}"
        showNavButton="true"
        navButtonPress="onNavBack"
        class="sapUiSizeCompact" > 
        
        <dependents>
            <ColumnListItem id="orderListItemTemplate" type="Active">
                <cells>
                    <Text id="cellOrderNumber" text="{parts: [{path: 'jsonOrders>Aufnr'}, {path: 'jsonOrders>OrderNumber'}], formatter: '.formatter.fallback'}" maxLines="2"/> 
                    
                    <Text id="cellOrderType" text="{parts: [{path: 'jsonOrders>Aurt'}, {path: 'jsonOrders>OrderType'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellPlant" text="{parts: [{path: 'jsonOrders>Werks'}, {path: 'jsonOrders>PlanningPlant'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellDescription" text="{parts: [{path: 'jsonOrders>Ktext'}, {path: 'jsonOrders>PlanningStatus'}], formatter: '.formatter.date'}" maxLines="2"/>
                    
                    <Text id="cellStartDate" 
                          text="{parts: [{path: 'jsonOrders>Gstrp'}, {path: 'jsonOrders>StartDate'}], formatter: '.formatter.date'}" 
                          maxLines="2"/>
                    
                    <Text id="cellEndDate" 
                          text="{parts: [{path: 'jsonOrders>Gltrp'}, {path: 'jsonOrders>EndDate'}], formatter: '.formatter.date'}" 
                          maxLines="2"/>
                    
                    <Text id="cellQuantity" text="{parts: [{path: 'jsonOrders>Gamng'}, {path: 'jsonOrders>PlannedQuantity'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellUnit" text="{parts: [{path: 'jsonOrders>Gmein'}, {path: 'jsonOrders>Unit'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellCreator" text="{parts: [{path: 'jsonOrders>Ernam'}, {path: 'jsonOrders>Creator'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellStockCreation" 
                          text="{parts: [{path: 'jsonOrders>Erdat'}, {path: 'jsonOrders>StockCategory'}], formatter: '.formatter.fallback'}" 
                          maxLines="2"/>
                    
                    <Text id="cellProdPlant" text="{parts: [{path: 'jsonOrders>Objnr'}, {path: 'jsonOrders>ProductionPlant'}], formatter: '.formatter.fallback'}" maxLines="2"/>
                    
                    <Text id="cellMrpFtrmi" 
                          text="{parts: [{path: 'jsonOrders>Ftrmi'}, {path: 'jsonOrders>MrpGroup'}], formatter: '.formatter.fallback'}" 
                          maxLines="2"/>
                    
                    <Text id="cellFtrmp" text="{path: 'jsonOrders>Ftrmp', formatter: '.formatter.date'}" maxLines="2"/>
                </cells>
            </ColumnListItem>
        </dependents>

        <content>
            <Table
                id="ordersTable"
                width="auto"
                >
                <headerToolbar>
                    <Toolbar id="tableToolbar">
                        <Title id="tableTitle" text="{i18n>orderListTableTitle}" level="H2"/>
                        <ToolbarSpacer id="tableToolbarSpacer"/>
                        
                        <!-- Month Filter (Visible if mode=Month) -->
                        <Select id="filterMonth" width="12rem" visible="{= ${viewModel>/mode} === 'Month' }">
                            <items>
                                <core:Item id="mJan" key="00" text="January"/>
                                <core:Item id="mFeb" key="01" text="February"/>
                                <core:Item id="mMar" key="02" text="March"/>
                                <core:Item id="mApr" key="03" text="April"/>
                                <core:Item id="mMay" key="04" text="May"/>
                                <core:Item id="mJun" key="05" text="June"/>
                                <core:Item id="mJul" key="06" text="July"/>
                                <core:Item id="mAug" key="07" text="August"/>
                                <core:Item id="mSep" key="08" text="September"/>
                                <core:Item id="mOct" key="09" text="October"/>
                                <core:Item id="mNov" key="10" text="November"/>
                                <core:Item id="mDec" key="11" text="December"/>
                            </items>
                        </Select>

                        <!-- Year Filter (Always visible for context or fallback) -->
                        <Select id="filterYear" width="8rem">
                            <items>
                                <core:Item id="y2024" key="2024" text="2024"/>
                                <core:Item id="y2025" key="2025" text="2025"/>
                                <core:Item id="y2026" key="2026" text="2026"/>
                            </items>
                        </Select>
                        
                        <Button id="btnGo" text="Go" type="Emphasized" press="onFilterSearch" />
                    </Toolbar>
                </headerToolbar> 
                <columns>
                    <Column id="colOrderNumber" width="7rem"><Text id="txtOrderNumber" text="{i18n>colOrderNumber}"/></Column>
                    <Column id="colOrderType" width="4rem"><Text id="txtOrderType" text="{i18n>colOrderType}"/></Column>
                    <Column id="colPlant" width="5rem"><Text id="txtPlant" text="{i18n>colPlant}"/></Column>
                    <Column id="colDescription" width="auto"><Text id="txtDescription" text="Desc / Created"/></Column>
                    <Column id="colStartDate" hAlign="End" width="7rem"><Text id="txtStartDate" text="Impl Start"/></Column>
                    <Column id="colEndDate" hAlign="End" width="7rem"><Text id="txtEndDate" text="Impl End"/></Column>
                    <Column id="colQuantity" hAlign="End" width="5rem"><Text id="txtQuantity" text="{i18n>colQuantity}"/></Column>
                    <Column id="colUnit" width="3rem"><Text id="txtUnit" text="{i18n>colUnit}"/></Column>
                    <Column id="colCreator" width="6rem"><Text id="txtCreator" text="{i18n>colCreator}"/></Column>
                    <Column id="colStockCreation" width="7rem"><Text id="txtStockCreation" text="{i18n>colStockCreationDate}"/></Column>
                    <Column id="colProdPlant" width="7rem"><Text id="txtProdPlant" text="{i18n>colProdPlantObjnr}"/></Column>
                    <Column id="colMrpFtrmi" width="7rem"><Text id="txtMrpFtrmi" text="{i18n>colMrpFtrmi}"/></Column>
                    <Column id="colFtrmp" width="7rem"><Text id="txtFtrmp" text="{i18n>colFtrmp}"/></Column>
                </columns>
                
            </Table>
        </content>
    </Page>
</mvc:View>